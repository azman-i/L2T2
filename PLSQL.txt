


CREATE OR REPLACE FUNCTION DEFAULT_WORKING_PROJECT (EID IN NUMBER)
RETURN VARCHAR2 IS
JDATE DATE ;
YEARS NUMBER ;
MSG VARCHAR2(100) ;
ECOUNT NUMBER;
AVGSALARY NUMBER;
BEGIN
BEGIN
SELECT COUNT(*) INTO ECOUNT
FROM EMPLOYEES 
WHERE MANAGER_ID = EID ;
END ;
IF ECOUNT = 0 THEN
MSG := 'No employee found.' ;
ELSIF ECOUNT>0 THEN
BEGIN
SELECT AVG(E1.SALARY) INTO AVGSALARY
FROM EMP E1 
WHERE (E1.MANAGER_ID =EID)
GROUP BY E1.MANAGER_ID;
END;
END IF;
IF AVGSALARY>10000 THEN
MSG:='RICH' ;
ELSIF AVGSALARY<10000 AND AVGSALARY>8000 THEN
MSG:='MEDIUM';
ELSE
MSG:='SMALL';
END IF;

RETURN MSG;
END;
/
 
















CREATE OR REPLACE FUNCTION DEFAULTSALARY(EID IN VARCHAR2,WORKING IN NUMBER)
RETURN NUMBER IS
JDATE DATE ;
SA NUMBER ;
MSG VARCHAR2(100) ;
BEGIN

IF WORKING IS NULL THEN
BEGIN
MSG:=DEFAULT_WORKING_PROJECT(EID);
END;

IF MSG='GRAND' THEN
SA:=15000;
ELSIF MSG='MEDIUM' THEN
SA:=9000;
ELSE
SA:=5000;
END IF;

ELSE
BEGIN
SELECT E1.SALARY INTO SA
FROM EMP E1
WHERE E1.WORKING_PR=WORKING  AND E1.MANAGER_ID=EID;
END;

END IF;
RETURN SA;
 END;
/

/*BEGIN
SELECT COUNT(*) INTO ECOUNT
FROM EMPLOYEES 
WHERE MANAGER_ID = EID ;
END ;
IF ECOUNT = 0 THEN
MSG := 'No employee found.' ;
ELSIF ECOUNT>0 THEN
BEGIN
SELECT AVG(E1.SALARY) INTO AVGSALARY
FROM EMP E1 
WHERE (E1.MANAGER_ID =EID)
GROUP BY E1.MANAGER_ID;
END IF;
IF AVGSALARY>10000 THEN
MSG:='RICH' ;
ELSIF AVGSALARY<10000 AND AVGSALARY>8000 THEN
MAG:='MEDIUM';
ELSE
MSG:='SMALL';
END IF;

RETURN MSG;*/

END;
/